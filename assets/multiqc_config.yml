custom_logo: "nf-core-mhcquant_logo_light.png"
custom_logo_url: https://github.com/nf-core/mhcquant
custom_logo_title: "nf-core/mhcquant"

report_comment: >
  This report has been generated by the <a href="https://github.com/nf-core/mhcquant/releases/tag/3.0.0" target="_blank">nf-core/mhcquant</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://nf-co.re/mhcquant/3.0.0/docs/output" target="_blank">documentation</a>.
report_section_order:
  "nf-core-mhcquant-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "nf-core-mhcquant-summary":
    order: -1002

export_plots: true
disable_version_detection: true

# Modules to run
run_modules:
  - custom_content
  - percolator

# Custom tables and plots
custom_data:
  # Summary of chromatogram plot
  chromatogram:
    plot_type: "linegraph"
    file_format: "csv"
    section_name: "MS1 Chromatogram"
    description: |
      An MS1 chromatogram is a plot of the intensity of precursor ions (MS1) detected over time,
      typically with retention time (RT) on the x-axis and ion intensity on the y-axis.
      It represents the total ion current (TIC) from the MS1 scan,
      which is useful for monitoring the overall elution profile of compounds during a chromatographic separation.
    pconfig:
      xlab: "Retention time [min]"
      xmin: 0
      ylab: "Intensity"
      logswitch: true
      logswitch_active: true

  # Mass error plot
  mass_error:
    plot_type: "boxplot"
    file_format: "tsv"
    section_name: "Fragment mass error"
    description: |
      The fragment mass error describes the differences between observed and theoretical fragment ion masses.
      It helps assessing the accuracy and calibration of the mass spectrometer by visualizing the error range
      and potential deviations. Depending on your configurations this error is plotted in Dalton (Da)
      or parts-per-million (ppm).
    pconfig:
      xlab: "Mass deviation [Da/ppm]"

  stats_table:
    plot_type: "table"
    file_format: "csv"
    section_name: "General Statistics"
    pconfig:
      id: "general_stats"
      title: "General Statistics"

  len_plot:
    plot_type: "linegraph"
    file_format: "csv"
    section_name: "Peptide lengths"
    pconfig:
      id: "length_dist"
      title: "Distribution of peptide lengths"
      xlab: "Length"
      ylab: "Frequency"

  mz_plot:
    plot_type: "linegraph"
    file_format: "csv"
    section_name: "Mass-to-Charge"
    pconfig:
      id: "histogram_mz"
      title: "Mass-to-Charge Histogram"
      xlab: "m/z"
      ylab: "Frequency"

  rt_plot:
    plot_type: "linegraph"
    file_format: "csv"
    section_name: "Retention time"
    pconfig:
      id: "histogram_rt"
      title: "Retention time Histogram"
      xlab: "Retention time"
      ylab: "Frequency"

  qvalue_plot:
    plot_type: "linegraph"
    file_format: "csv"
    section_name: "Q-Value"
    pconfig:
      id: "histogram_scores"
      title: "Percolator q-value Histogram"
      description: "A q-value histogram in Percolator visualizes q-value distributions for PSMs, helping set the FDR threshold (typically 1%). It ensures only high-confidence identifications are retained, with a sharp drop-off beyond the threshold."
      xlab: "q-value"
      ylab: "Frequency"

  scores_plot_xcorr:
    plot_type: "boxplot"
    file_format: "csv"
    section_name: "Xcorr-Value"
    pconfig:
      id: "scores_xcorr"
      title: "Comet Xcorr Distribution"
      description: "The Comet Xcorr plot visualizes the cross-correlation (Xcorr) score distribution for PSMs, indicating match quality. Higher Xcorr values signify better peptide-spectrum matches. This helps set a threshold to filter out low-confidence identifications."
      xlab: "Xcorr"

  peptide_intensity_plot:
    plot_type: "boxplot"
    file_format: "csv"
    section_name: "Peptide Intensity"
    pconfig:
      id: "peptide_intensity"
      title: "Peptide Intensity Distribution"
      description: "Comparison of log2-transformed peptide intensities across samples. Helps assess data consistency and detect potential outliers or batch effects."
      xlab: "log2(Intensity)"
#id: custom_box
#plot_type: 'box'
#section_name: 'Custom box plot'
#description: "Box plot for a sample"
#pconfig:
#    title: 'Box plot'

sp:
  chromatogram:
    fn: "*_chrom.csv"
  mass_error:
    fn: "*frag_mass_err.tsv"
  stats_table:
    fn: "*_general_stats.csv"
  len_plot:
    fn: "*_peptide_length.csv"
  mz_plot:
    fn: "*_histogram_mz.csv"
  rt_plot:
    fn: "*_histogram_rt.csv"
  qvalue_plot:
    fn: "*_histogram_scores.csv"
  scores_plot_xcorr:
    fn: "*_xcorr_scores.csv"
  peptide_intensity_plot:
    fn: "*_peptide_intensity.csv"
### Define the order of sections
#module_order:
#  - custom_content
#
## Set the order of custom code plots and tables
#custom_content:
#  order:
#    - chromatogram
#    - mass_error

# Define the mapping of group names to feature names for the percolator plot
percolator:
  group_to_feature:
    psm_file:
      - "MS:1002255"
      - "MS:1002252"
      - "COMET:deltaCn"
      - "COMET:lnNumSP"
      - "COMET:lnRankSP"
      - "COMET:IonFrac"
      - "COMET:deltaLCn"
      - "COMET:lnExpect"
      - "charge1"
      - "mass"
      - "enzC"
      - "charge5"
      - "charge2"
      - "absdm"
      - "peplen"
      - "charge4"
      - "enzN"
      - "charge3"
      - "m0"
      - "enzInt"
      - "isotope_error"
      - "dm"
      - "COMET:lnNumSP"
      - "charge1"
      - "mass"
      - "enzC"
      - "COMET:lnRankSP"
      - "charge5"
      - "charge2"
      - "absdm"
      - "COMET:IonFrac"
      - "COMET:deltaLCn"
      - "peplen"
      - "charge4"
      - "enzN"
      - "charge3"
      - "m0"
      - "COMET:lnExpect"
      - "enzInt"
      - "isotope_error"
      - "dm"
    ms2pip:
      - "ionb_min_abs_diff"
      - "ionb_mse"
      - "iony_std_abs_diff_norm"
      - "ionb_mse_norm"
      - "ionb_std_abs_diff_norm"
      - "dotprod"
      - "cos_norm"
      - "iony_std_abs_diff"
      - "iony_mean_abs_diff_norm"
      - "dotprod_norm"
      - "abs_diff_Q2_norm"
      - "iony_spearman"
      - "ionb_min_abs_diff_norm"
      - "iony_max_abs_diff_norm"
      - "dotprod_iony_norm"
      - "ionb_abs_diff_Q2"
      - "max_abs_diff"
      - "dotprod_ionb_norm"
      - "abs_diff_Q3_norm"
      - "iony_min_abs_diff_norm"
      - "cos_iony_norm"
      - "spec_pearson"
      - "std_abs_diff"
      - "min_abs_diff_norm"
      - "ionb_max_abs_diff"
      - "dotprod_iony"
      - "ionb_mean_abs_diff_norm"
      - "max_abs_diff_iontype"
      - "mean_abs_diff"
      - "iony_max_abs_diff"
      - "cos_iony"
      - "ionb_std_abs_diff"
      - "iony_pearson"
      - "ionb_max_abs_diff_norm"
      - "mean_abs_diff_norm"
      - "abs_diff_Q1"
      - "ionb_pearson_norm"
      - "ionb_abs_diff_Q1_norm"
      - "min_abs_diff"
      - "ionb_mean_abs_diff"
      - "spec_spearman"
      - "iony_mean_abs_diff"
      - "abs_diff_Q1_norm"
      - "iony_min_abs_diff"
      - "ionb_spearman"
      - "iony_abs_diff_Q3_norm"
      - "min_abs_diff_iontype"
      - "cos_ionb_norm"
      - "abs_diff_Q2"
      - "abs_diff_Q3"
      - "spec_pearson_norm"
      - "ionb_abs_diff_Q2_norm"
      - "std_abs_diff_norm"
      - "dotprod_ionb"
      - "cos_ionb"
      - "ionb_abs_diff_Q3"
      - "iony_mse_norm"
      - "iony_pearson_norm"
      - "spec_mse_norm"
      - "ionb_abs_diff_Q3_norm"
      - "iony_abs_diff_Q1_norm"
      - "ionb_pearson"
      - "max_abs_diff_norm"
      - "spec_mse"
      - "iony_mse"
      - "ionb_abs_diff_Q1"
      - "iony_abs_diff_Q2_norm"
      - "iony_abs_diff_Q1"
      - "iony_abs_diff_Q3"
      - "cos"
      - "iony_abs_diff_Q2"
    deeplc:
      - "rt_diff"
      - "predicted_retention_time"
      - "predicted_retention_time_best"
      - "observed_retention_time_best"
      - "rt_diff_best"
      - "observed_retention_time"
    im2deep:
      - "ccs_observed_im2deep"
      - "ccs_predicted_im2deep"
      - "ccs_error_im2deep"
      - "abs_ccs_error_im2deep"
      - "perc_ccs_error_im2deep"
